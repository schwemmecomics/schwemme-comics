{{ define "main" }}
<section class="home-container" style="max-width: 900px; margin: 0 auto; text-align: center; padding: 20px;">
    
    {{/* Wir holen uns den aktuellsten Comic */}}
    {{ $comics := where .Site.RegularPages "Section" "comics" }}
    {{ $latest := index $comics.ByDate.Reverse 0 }}

    {{ if $latest }}
        <div class="latest-comic">
            <h2 style="margin-bottom: 20px;">Neuester Comic: {{ $latest.Title }}</h2>
            
            <a href="{{ $latest.Permalink }}">
                {{/* Wir suchen das Bild im Ordner des neuesten Comics */}}
                {{ $comicImg := $latest.Resources.GetMatch (printf "comic.%s.*" .Lang) | default ($latest.Resources.GetMatch "comic.*") }}
                {{ if $comicImg }}
                    <img src="{{ $comicImg.RelPermalink }}" alt="{{ $latest.Title }}" style="max-width: 100%; height: auto; box-shadow: 0 4px 15px rgba(0,0,0,0.2); border-radius: 8px;">
                {{ end }}
            </a>

            <div style="margin-top: 20px;">
                <a href="{{ $latest.Permalink }}" style="display: inline-block; padding: 10px 20px; background: #333; color: #fff; text-decoration: none; border-radius: 5px;">Zu den Kommentaren & Notizen</a>
            </div>
        </div>
    {{ else }}
        <p>Noch keine Comics veröffentlicht.</p>
    {{ end }}

    <hr style="margin: 50px 0; border: 0; border-top: 1px solid #eee;">

    {{/* Galerie der älteren Comics */}}
    <h3>Archiv</h3>
    <div class="comic-gallery" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; margin-top: 20px;">
        {{ range (after 1 $comics.ByDate.Reverse) }}
            <div class="gallery-item" style="border: 1px solid #eee; padding: 10px; border-radius: 5px;">
                <a href="{{ .Permalink }}" style="text-decoration: none; color: inherit;">
                    {{ $thumb := .Resources.GetMatch "comic.*" }}
                    {{ if $thumb }}
                        <img src="{{ $thumb.RelPermalink }}" style="width: 100%; height: auto; border-radius: 3px;">
                    {{ end }}
                    <p style="font-size: 0.9em; margin-top: 5px;">{{ .Title }}</p>
                </a>
            </div>
        {{ end }}
    </div>
</section>
{{ end }}
