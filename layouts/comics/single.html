{{ define "main" }}
<article style="max-width: 900px; margin: 0 auto; text-align: center; padding: 20px; font-family: sans-serif;">
    
    <h1>{{ .Title }}</h1>

    {{/* Navigation oben */}}
    {{ partial "comic-nav.html" . }}

    {{/* Das Comic-Bild */}}
    <div class="comic-display" style="margin: 30px 0;">
        {{ $comic := .Resources.GetMatch (printf "comic.%s.*" .Lang) | default (.Resources.GetMatch "comic.*") }}
        {{ if $comic }}
            <img src="{{ $comic.RelPermalink }}" alt="{{ .Title }}" style="max-width: 100%; height: auto; box-shadow: 0 4px 15px rgba(0,0,0,0.2);">
        {{ end }}
    </div>

    {{/* Navigation unten */}}
    {{ partial "comic-nav.html" . }}

    <div class="author-notes" style="text-align: left; background: #fdfdfd; padding: 30px; border: 1px solid #eee; border-radius: 8px; margin-top: 40px;">
        <h3 style="margin-top: 0; color: #555;">Notizen des Autors:</h3>
        {{ .Content }}
    </div>

    {{/* Share Section*/}}
<div class="share-container" style="margin: 20px 0; text-align: center;">
    {{/* Der Button mit deinem einen Icon */}}
    <button id="shareBtn" style="background: none; border: none; cursor: pointer; padding: 10px;">
        <img src="{{ "images/share-icon.png" | relURL }}" alt="Teilen" style="width: 40px; height: auto;">
        <p style="margin: 0; font-size: 0.8em; color: #666;">Comic teilen</p>
    </button>
</div>

<script>
document.getElementById('shareBtn').addEventListener('click', async () => {
    const shareData = {
        title: '{{ .Title }}',
        text: 'Schau dir diesen Comic an!',
        url: '{{ .Permalink }}'
    };

    try {
        // Prüft, ob der Browser das systemeigene Teilen unterstützt
        if (navigator.share) {
            await navigator.share(shareData);
        } else {
            // Fallback: Falls nicht (z.B. am PC), wird der Link einfach kopiert
            await navigator.clipboard.writeText('{{ .Permalink }}');
            alert('Link wurde kopiert!');
        }
    } catch (err) {
        console.log('Teilen abgebrochen oder Fehler:', err);
    }
});
</script>
    
    {{/* Comments */}}
<div class="comments-wrapper" style="margin-top: 60px; padding: 20px; border-top: 2px solid #eee; text-align: left;">
    <h3 style="text-align: center;">Kommentare</h3>
    
    <div id="cusdis_thread"
      data-host="https://cusdis.com"
      data-app-id="24970c43-2814-46a1-ad48-67de2a7d85c2"
      data-page-id="{{ .File.ContentBaseName }}"
      data-page-url="{{ .Permalink }}"
      data-page-title="{{ .Title }}"
      data-theme="light"
    ></div>

    {{/* Das Cusdis-Skript */}}
    <script async defer src="{{ "js/cusdis.js" | relURL }}"></script>
</div>
</article>
{{ end }}
